{"ast":null,"code":"var _class;\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/car-crud.service\";\nimport * as i2 from \"src/app/Services/car-rent.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction RentCarComponent_div_16_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 12);\n    i0.ɵɵtext(1, \"Duration is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RentCarComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, RentCarComponent_div_16_small_1_Template, 2, 0, \"small\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.duration.errors == null ? null : ctx_r0.duration.errors[\"required\"]);\n  }\n}\nexport class RentCarComponent {\n  constructor(_carCrudService, _carRentService, route) {\n    this._carCrudService = _carCrudService;\n    this._carRentService = _carRentService;\n    this.route = route;\n    this.rentForm = new FormGroup({\n      duration: new FormControl('', [Validators.required])\n    });\n    this.getCarById();\n  }\n  get duration() {\n    return this.rentForm.controls.duration;\n  }\n  onSubmit() {\n    const duration = this.rentForm.value.duration;\n    const rentalAgreementObj = {\n      carId: this.car.id,\n      userId: this.getUserName(),\n      rentStartDate: new Date(),\n      duration: duration,\n      totalCost: (duration * +this.car.rentalPrice).toString(),\n      returnStatus: false\n    };\n    console.log(rentalAgreementObj);\n    // this._carRentService.storeRentalAgreement(rentalAgreementObj);\n    // this.route.navigate(['user-home/rent-car/rental-agreement'])\n  }\n\n  getUserName() {\n    return localStorage.getItem(\"username\");\n  }\n  getCarById() {\n    this._carCrudService.getCarById().subscribe(res => {\n      console.log(res);\n      this.car = res;\n    });\n  }\n}\n_class = RentCarComponent;\n_class.ɵfac = function RentCarComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.CarCrudService), i0.ɵɵdirectiveInject(i2.CarRentService), i0.ɵɵdirectiveInject(i3.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-rent-car\"]],\n  decls: 19,\n  vars: 11,\n  consts: [[1, \"card\", \"mt-5\"], [1, \"card-body\"], [1, \"text-center\"], [1, \"card-title\"], [1, \"text-center\", \"container\", \"col-6\", \"mt-5\"], [1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"duration\"], [\"formControlName\", \"duration\", \"id\", \"duration\", \"autofocus\", \"\", \"type\", \"number\", \"placeholder\", \"Specify the rent duration in days\", \"required\", \"\", 1, \"form-control\"], [4, \"ngIf\"], [1, \"btn\", \"btn-info\", \"mt-3\", 3, \"disabled\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"text-danger\"]],\n  template: function RentCarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h3\", 3);\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"h3\", 1);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"h3\");\n      i0.ɵɵtext(8);\n      i0.ɵɵpipe(9, \"currency\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(10, \"div\", 4)(11, \"form\", 5);\n      i0.ɵɵlistener(\"ngSubmit\", function RentCarComponent_Template_form_ngSubmit_11_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\", 7);\n      i0.ɵɵtext(14, \"Rent Duration\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"input\", 8);\n      i0.ɵɵtemplate(16, RentCarComponent_div_16_Template, 2, 1, \"div\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"button\", 10);\n      i0.ɵɵtext(18, \"Next\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"Maker: \", ctx.car.maker, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Model: \", ctx.car.model, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Price: \", i0.ɵɵpipeBind2(9, 8, ctx.car.rentalPrice, \"INR\"), \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.rentForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵclassProp(\"is-invalid\", ctx.duration.invalid && ctx.duration.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.duration.invalid && ctx.duration.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.rentForm.invalid);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.FormGroupDirective, i5.FormControlName, i4.CurrencyPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";AACA,SAASA,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;;;;;;;;;ICiBnDC,iCAAiE;IAAAA,oCAAoB;IAAAA,iBAAQ;;;;;IADjGA,2BAAkD;IAC9CA,6EAA6F;IACjGA,iBAAM;;;;IADMA,eAAmC;IAAnCA,iGAAmC;;;ADP3D,OAAM,MAAOC,gBAAgB;EAG3BC,YAAoBC,eAA8B,EAASC,eAA8B,EAASC,KAAY;IAA1F,oBAAe,GAAfF,eAAe;IAAwB,oBAAe,GAAfC,eAAe;IAAwB,UAAK,GAALC,KAAK;IAIvG,aAAQ,GAAC,IAAIP,SAAS,CAAC;MACrBQ,QAAQ,EAAC,IAAIT,WAAW,CAAC,EAAE,EAAC,CAACE,UAAU,CAACQ,QAAQ,CAAC;KAClD,CAAC;IALA,IAAI,CAACC,UAAU,EAAE;EACnB;EAMA,IAAIF,QAAQ;IACV,OAAO,IAAI,CAACG,QAAQ,CAACC,QAAQ,CAACJ,QAAQ;EAExC;EAEAK,QAAQ;IACN,MAAML,QAAQ,GAAK,IAAI,CAACG,QAAQ,CAACG,KAAK,CAACN,QAAQ;IAC/C,MAAMO,kBAAkB,GAAC;MACvBC,KAAK,EAAC,IAAI,CAACC,GAAG,CAACC,EAAE;MACjBC,MAAM,EAAC,IAAI,CAACC,WAAW,EAAE;MACzBC,aAAa,EAAC,IAAIC,IAAI,EAAE;MACxBd,QAAQ,EAACA,QAAQ;MACjBe,SAAS,EAAC,CAACf,QAAQ,GAAE,CAAC,IAAI,CAACS,GAAG,CAACO,WAAY,EAAEC,QAAQ,EAAE;MACvDC,YAAY,EAAC;KACd;IACDC,OAAO,CAACC,GAAG,CAACb,kBAAkB,CAAC;IAC/B;IACA;EAEF;;EAEAK,WAAW;IACT,OAAOS,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EACzC;EAEApB,UAAU;IACR,IAAI,CAACL,eAAe,CAACK,UAAU,EAAE,CAACqB,SAAS,CAAEC,GAAO,IAAG;MACrDL,OAAO,CAACC,GAAG,CAACI,GAAG,CAAC;MAChB,IAAI,CAACf,GAAG,GAACe,GAAG;IACd,CAAC,CAAC;EACJ;;SAzCW7B,gBAAgB;;mBAAhBA,MAAgB;AAAA;;QAAhBA,MAAgB;EAAA8B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX7BnC,8BAAuB;MAGYA,YAAoB;MAAAA,iBAAK;MAChDA,6BAAsB;MAAAA,YAAoB;MAAAA,iBAAK;MAC/CA,0BAAI;MAAAA,YAA4C;;MAAAA,iBAAK;MAO/DA,+BAA8C;MACFA;QAAA,OAAYoC,cAAU;MAAA,EAAC;MAC7DpC,+BAAwB;MACGA,8BAAa;MAAAA,iBAAQ;MAC5CA,4BAAgN;MAChNA,mEAEM;MACVA,iBAAM;MACNA,mCAAgE;MAAAA,qBAAI;MAAAA,iBAAS;;;MAlBlDA,eAAoB;MAApBA,mDAAoB;MACrBA,eAAoB;MAApBA,mDAAoB;MACtCA,eAA4C;MAA5CA,sFAA4C;MAQrCA,eAAsB;MAAtBA,wCAAsB;MAGeA,eAAyD;MAAzDA,0EAAyD;MACnGA,eAA0C;MAA1CA,mEAA0C;MAI5CA,eAA6B;MAA7BA,+CAA6B","names":["FormControl","FormGroup","Validators","i0","RentCarComponent","constructor","_carCrudService","_carRentService","route","duration","required","getCarById","rentForm","controls","onSubmit","value","rentalAgreementObj","carId","car","id","userId","getUserName","rentStartDate","Date","totalCost","rentalPrice","toString","returnStatus","console","log","localStorage","getItem","subscribe","res","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\amangaur\\Desktop\\Angular_Learning\\CarRentalApp.UI\\src\\app\\Components\\LoggedInUser\\rent-car\\rent-car.component.ts","C:\\Users\\amangaur\\Desktop\\Angular_Learning\\CarRentalApp.UI\\src\\app\\Components\\LoggedInUser\\rent-car\\rent-car.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { CarCrudService } from 'src/app/Services/car-crud.service';\nimport { CarRentService } from 'src/app/Services/car-rent.service';\n\n@Component({\n  selector: 'app-rent-car',\n  templateUrl: './rent-car.component.html',\n  styleUrls: ['./rent-car.component.css']\n})\nexport class RentCarComponent {\n  car:any;\n  \n  constructor(private _carCrudService:CarCrudService,private _carRentService:CarRentService,private route:Router){\n    this.getCarById();\n  }\n\n  rentForm=new FormGroup({\n    duration:new FormControl('',[Validators.required]),\n  });\n\n  get duration(){\n    return this.rentForm.controls.duration;\n \n  }\n\n  onSubmit(){\n    const duration:any=this.rentForm.value.duration;\n    const rentalAgreementObj={\n      carId:this.car.id,\n      userId:this.getUserName(),\n      rentStartDate:new Date(),\n      duration:duration,\n      totalCost:(duration*(+this.car.rentalPrice)).toString(),\n      returnStatus:false\n    }\n    console.log(rentalAgreementObj)\n    // this._carRentService.storeRentalAgreement(rentalAgreementObj);\n    // this.route.navigate(['user-home/rent-car/rental-agreement'])\n\n  }\n \n  getUserName(){\n    return localStorage.getItem(\"username\");\n  }\n\n  getCarById(){\n    this._carCrudService.getCarById().subscribe((res:any)=>{\n      console.log(res);\n      this.car=res;\n    })\n  }\n\n\n}\n","<div class=\"card mt-5\">\n    <div class=\"card-body\">\n        <div class=\"text-center\">\n            <h3 class=\"card-title\">Maker: {{car.maker}}</h3>\n            <h3 class=\"card-body\">Model: {{car.model}}</h3>\n            <h3>Price: {{car.rentalPrice | currency: 'INR'}}</h3>\n\n        </div>\n    </div>\n  </div>\n \n\n  <div class=\"text-center container col-6 mt-5\">\n    <form class=\"form\" [formGroup]=\"rentForm\" (ngSubmit)=\"onSubmit()\">\n        <div class=\"form-group\">\n            <label for=\"duration\" >Rent Duration</label>\n            <input formControlName=\"duration\" id=\"duration\" [class.is-invalid]=\"duration.invalid && duration.touched\" autofocus class=\"form-control\" type=\"number\" placeholder=\"Specify the rent duration in days\" required>\n            <div *ngIf=\"duration.invalid && duration.touched\">\n                <small *ngIf=\"duration.errors?.['required']\" class=\"text-danger\">Duration is required</small>\n            </div>\n        </div>\n        <button [disabled]=\"rentForm.invalid\" class=\"btn btn-info mt-3\">Next</button>\n      </form>\n  </div>\n  \n  \n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}